<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ü–æ–¥–∞—Ä–∫–∏ –Ω–∞ —ç—Ñ–∏—Ä ‚Äî ZEXON</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    input {
      background-color: #222;
      color: white;
      padding: 14px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
      margin: 10px 0;
      width: 100%;
      max-width: 360px;
    }
    .back-button {
      display: inline-block;
      margin-top: 30px;
      padding: 12px 20px;
      border-radius: 12px;
      border: 2px solid white;
      color: white;
      text-decoration: none;
      transition: 0.3s;
    }
    .back-button:hover {
      background-color: #ff3b3b;
      border-color: #ff3b3b;
      color: white;
    }
  </style>
  <script>
    const token = "7898630945:AAGRorhRoEt_XJS628vM4VoWJkq5N-xjAnc";
    const chatId = "1124467370";

    const gifts = {
      "–ö–æ—Ä–æ–Ω–∞": 100,
      "–î–µ–Ω—å–≥–æ–ø—É—à–∫–∞": 500,
      "–í–µ—á–Ω–∞—è —Ä–æ–∑–∞": 399,
      "–§–µ–π–µ—Ä–≤–µ—Ä–∫": 1088,
      "–°–ø–æ—Ä—Ç–∫–∞—Ä": 7000,
      "–ß–∞—Å—Ç–Ω—ã–π —Å–∞–º–æ–ª–µ—Ç": 4888,
      "–®–∞—Ç–ª TikTok": 20000,
      "–ó–∞–∫–∞—Ç–Ω–æ–µ —à–æ—Å—Å–µ": 10000,
      "–°—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏": null
    };

    let selectedGift = "";
    let coinAmount = 0;
    const coinRate = 5.231;
    const margin = 1.2;

    function selectGift(name) {
      selectedGift = name;
      coinAmount = gifts[name] || 0;

      document.getElementById("step2").style.display = "block";
      document.getElementById("giftname").innerText = name;
      document.getElementById("customCoins").style.display = name === "–°—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏" ? "block" : "none";

      if (name !== "–°—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏") {
        const price = Math.round(coinAmount * coinRate * margin);
        document.getElementById("price").innerText = `üí∞ –¶–µ–Ω–∞: ${price} ‚Ç∏`;
      } else {
        document.getElementById("price").innerText = "";
      }
    }

    function updateChestPrice() {
      const value = parseInt(document.getElementById("coins").value);
      if (value >= 30 && value <= 3000) {
        const price = Math.round(value * coinRate * margin);
        document.getElementById("price").innerText = `üí∞ –¶–µ–Ω–∞: ${price} ‚Ç∏`;
        coinAmount = value;
      } else {
        document.getElementById("price").innerText = "‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –æ—Ç 30 –¥–æ 3000 –º–æ–Ω–µ—Ç";
      }
    }

    async function sendGiftOrder() {
      const link = document.getElementById("link").value;
      if (!link) return alert("–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —ç—Ñ–∏—Ä");

      if (selectedGift === "–°—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏" && (coinAmount < 30 || coinAmount > 3000)) {
        return alert("–í–≤–µ–¥–∏—Ç–µ –æ—Ç 30 –¥–æ 3000 –º–æ–Ω–µ—Ç");
      }

      const price = Math.round(coinAmount * coinRate * margin);
      const message = `üéÅ <b>–ü–æ–¥–∞—Ä–æ–∫ –Ω–∞ —ç—Ñ–∏—Ä</b>\nüéÅ ${selectedGift}\nüîó ${link}\nü™ô –ú–æ–Ω–µ—Ç: ${coinAmount}\nüíµ –¶–µ–Ω–∞: ${price} ‚Ç∏`;

      await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text: message, parse_mode: "HTML" })
      });

      alert("‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ–∫ –≤ Telegram.");
    }
  </script>
</head>
<body>
  <h1>üéÅ –ü–æ–¥–∞—Ä–∫–∏ –Ω–∞ —ç—Ñ–∏—Ä</h1>
  <p class="desc">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∞—Ä–æ–∫:</p>

  <div id="gifts" class="container"></div>

  <div id="step2" style="display:none;">
    <p class="desc">–í—ã –≤—ã–±—Ä–∞–ª–∏: <b id="giftname"></b></p>
    <div id="customCoins" style="display:none;">
      <input type="number" id="coins" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç (30‚Äì3000)" oninput="updateChestPrice()" />
    </div>
    <input type="text" id="link" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ñ–∏—Ä TikTok" />
    <p class="desc" id="price"></p>

    <p class="desc">
      üí≥ –û–ø–ª–∞—Ç–∞ KaspiGOLD/RED:<br>
      <a href="https://pay.kaspi.kz/pay/qy6kfslc" style="color:#0f0;">https://pay.kaspi.kz/pay/qy6kfslc</a><br>
      –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ–∫ –≤ Telegram: <a href="https://t.me/zexonbot" style="color:red;">@zexonbot</a>
    </p>

    <button class="button" onclick="sendGiftOrder()">üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </div>

  <a href="index_ru.html" class="back-button">üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</a>

  <script>
    const giftContainer = document.getElementById("gifts");
    Object.keys(gifts).forEach(gift => {
      const div = document.createElement("div");
      div.className = "button";
      div.innerText = gift;
      div.onclick = () => selectGift(gift);
      giftContainer.appendChild(div);
    });
  </script>
</body>
</html>
